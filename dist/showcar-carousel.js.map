{"version":3,"sources":["../src/showcar-carousel.js"],"names":[],"mappings":"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","file":"showcar-carousel.js","sourcesContent":["/**\n * Add a class to the given DOM element\n * @param {string} className\n * @param {HTMLElement} domEl\n * @returns {HTMLElement}\n */\nfunction addClass(className, domEl) {\n  let classList = [], classesString = domEl.getAttribute('class');\n  if (classesString) {\n    classList = classesString.split(' ');\n    if (classList.indexOf(className) === -1) {\n      classesString = classList.concat(className).join(' ');\n    }\n  } else {\n    classesString = className\n  }\n  domEl.setAttribute('class', classesString);\n  return domEl;\n}\n\n/**\n * Remove a class from the given DOM element\n * @param {string} className\n * @param {HTMLElement} domEl\n * @returns {HTMLElement}\n */\nfunction removeClass(className, domEl) {\n  let classList = [], classesString = domEl.getAttribute('class');\n  if (classesString) {\n    classList = classesString.split(' ');\n    if(classList.indexOf(className) !== -1){\n      classList.splice(classList.indexOf(className), 1);\n    }\n    domEl.setAttribute('class', classList.join(' '));\n  }\n  return domEl;\n}\n\n/**\n * Check if the given DOM element has a class\n * @param {string} className\n * @param {HTMLElement} domEl\n * @returns {boolean}\n */\nfunction containsClass(className, domEl) {\n  let classList = [], classesString = domEl.getAttribute('class');\n  if (classesString) {\n    classList = classesString.split(' ');\n  }\n  return classList.indexOf(className) > -1;\n}\n\n\nclass Carousel {\n\n  constructor(element) {\n\n    this.element = element;\n    this.container = null;\n\n    this.pagination = {\n      left: null,\n      right: null\n    };\n\n    this.index = 0;\n    this.refWidth = 330;\n    this.itemWidth = 330;\n    this.touchStart = {};\n    this.touchPrev  = {};\n\n    this.speed = Carousel.Speed.SLOW;\n\n    this.pager = document.createElement('a');\n    addClass('as24-pagination', this.pager);\n    addClass('hide', this.pager);\n    this.pager.href = '#';\n\n    this.element.addEventListener('touchstart', this.touchStartEventHandler.bind(this));\n    this.element.addEventListener('touchmove',  this.touchMoveEventHandler.bind(this));\n    this.element.addEventListener('touchend',   this.touchEndEventHandler.bind(this));\n  }\n\n  /**\n   * Gets all carousel items\n   */\n  get items() {\n    return this.element.querySelectorAll('as24-carousel-item');\n  }\n\n  /**\n   * Initializes the carousel by adding all necessary bits and bolts\n   */\n  init() {\n    this.addContainer();\n    this.resizeItems();\n    this.addPagination();\n    this.calculateEnvironment();\n    this.loadImages();\n  }\n\n  /**\n   * Redraw the whole carousel (can be triggered from outside)\n   */\n  redraw() {\n    this.index = 0;\n    this.resizeItems();\n    this.calculateEnvironment();\n    this.setPaginationButtonsVisibility();\n    this.loadImages();\n    this.moveContainer(0);\n  }\n\n  /**\n   * Resizes the carousel items\n   */\n  resizeItems(){\n    this.orgWidth = this.items[0].getBoundingClientRect().width + 20;\n    if(this.orgWidth === this.refWidth && this.element.offsetWidth < this.refWidth){\n      this.itemWidth = this.element.offsetWidth - 20;\n      [].forEach.call(this.items, element => element.style.width = `${this.itemWidth-20}px`);\n    } else {\n      this.itemWidth = this.items[0].getBoundingClientRect().width + 20;\n    }\n  }\n\n  /**\n   * Handles the touch start event\n   * @param {TouchEvent|Event} event - the event object\n   */\n  touchStartEventHandler(event) {\n    const target = event.target;\n    this.resetTouch();\n    if (!containsClass('as24-pagination', target)) {\n      this.touchStart = this.getTouchCoords(event);\n      this.touchPrev  = this.touchStart;\n    }\n  }\n\n  /**\n   * Handles the touch move event\n   * @param {TouchEvent|Event} event - the event object\n   */\n  touchMoveEventHandler(event) {\n    if (!this.isSwiping()) {\n      return;\n    }\n\n    const touchCoords = this.getTouchCoords(event);\n    const startDiffX  = Math.abs(touchCoords.x - this.touchStart.x);\n    const startDiffY  = Math.abs(touchCoords.y - this.touchStart.y);\n\n    if (startDiffX < startDiffY) {\n      this.resetTouch();\n    } else {\n      event.preventDefault();\n      this.touchPrev = touchCoords;\n    }\n  }\n\n  /**\n   * Handles the touch end event\n   * @param {TouchEvent|Event} event - the event object\n   */\n  touchEndEventHandler(event) {\n    if (!this.isSwiping()) {\n      return;\n    }\n\n    const touchCoords = this.getTouchCoords(event.changedTouches[0]);\n    let touchDiffX    = this.touchStart.x - touchCoords.x;\n    let absTouchDiffX = Math.abs(touchDiffX);\n    let howMany       = Math.ceil(absTouchDiffX / this.itemWidth);\n\n    for (let i = 0; i < howMany; i++) {\n      if (touchDiffX > 0) {\n        this.paginate(Carousel.Direction.RIGHT);\n      } else if (touchDiffX < 0) {\n        this.paginate(Carousel.Direction.LEFT);\n      }\n    }\n  }\n\n  /**\n   * Gets the touch coordinates by its touch event\n   * @param {TouchEvent|Event} event - the event object\n   * @returns {Coordinate} coordinate - object containing some x and y coordinates\n   */\n  getTouchCoords(event) {\n    let touch = event.touches && event.touches[0];\n    return new Carousel.Coordinate(\n      event.clientX || (touch && touch.clientX),\n      event.clientY || (touch && touch.clientY)\n    );\n  }\n\n  /**\n   * Resets the touch coordinates\n   */\n  resetTouch() {\n    this.touchStart = {};\n    this.touchPrev  = {};\n  }\n\n  /**\n   * Checks if the carousel is in swiping mode\n   * @returns {boolean}\n   */\n  isSwiping() {\n    return (Object.keys(this.touchStart).length > 0);\n  }\n\n  /**\n   * Gets all the necessary dimensions and values for calculating distances and the index\n   */\n  calculateEnvironment(){\n    this.itemsLength    = this.container.children.length;\n    this.itemsVisible   = Math.floor(this.element.offsetWidth / this.itemWidth);\n    this.totalReach     = this.container.offsetWidth - this.element.offsetWidth;\n    this.stepLength     = this.speed === Carousel.Speed.SLOW ? this.itemsLength - this.itemsVisible : Math.ceil(this.itemsLength / this.itemsVisible);\n    this.stepWidth      = this.speed === Carousel.Speed.SLOW ? this.itemWidth : Math.floor(this.element.offsetWidth / this.itemWidth) * this.itemWidth;\n  }\n\n  /**\n   * Get the new index for paginating depending on the direction\n   * @param {Direction|String} direction - the pagination direction. 'right' or 'left'\n   */\n  getNewIndex(direction){\n    if(direction === Carousel.Direction.LEFT && this.index > 0){\n      this.index -= 1;\n    } else if(direction === Carousel.Direction.RIGHT && this.index < this.stepLength) {\n      this.index += 1;\n    }\n  }\n\n  /**\n   * Wraps all the carousel items in a wrapper plus a container\n   */\n  addContainer() {\n    let wrapper = document.createElement('div');\n    addClass('as24-carousel-wrapper', wrapper);\n\n    this.container = document.createElement('div');\n\n    addClass('as24-carousel-container', this.container);\n\n    [].forEach.call(this.element.children, element => {\n      let item = element.cloneNode(true);\n      this.container.appendChild(item);\n    });\n\n    wrapper.appendChild(this.container);\n\n    this.element.innerHTML = '';\n    this.element.appendChild(wrapper);\n  }\n\n  /**\n   * Adds the 'left' and 'right 'pagination buttons\n   */\n  addPagination() {\n    for (let direction of [Carousel.Direction.LEFT, Carousel.Direction.RIGHT]){\n      this.createPaginationButton(direction);\n    }\n    removeClass('hide', this.pagination.right);\n  }\n\n  /**\n   * Creates the pagination buttons and event listeners\n   * @param {Direction|String} direction - the pagination direction. 'right' or 'left'\n   */\n  createPaginationButton(direction) {\n    let button = this.pagination[direction] = this.pager.cloneNode(true);\n    button.setAttribute('data-direction',direction);\n\n    button.addEventListener('mouseup', e => {\n      e.stopPropagation();\n      e.preventDefault();\n      this.paginate(direction);\n    });\n\n    button.addEventListener('click', e => e.preventDefault());\n\n    this.element.appendChild(button);\n  }\n\n  /**\n   * The handler for the pagination event\n   * @param {Direction|String} direction - the pagination direction. 'right' or 'left'\n   */\n  paginate(direction){\n    this.getNewIndex(direction);\n    let distance = this.calculateDistance();\n    this.setPaginationButtonsVisibility();\n    this.loadImages();\n    this.moveContainer(distance);\n  }\n\n  /**\n   * Calculates the moving distance\n   */\n  calculateDistance(){\n    let distance =  this.index * this.stepWidth;\n    distance = distance > this.totalReach ? this.totalReach : distance;\n    return ~ distance + 1;\n  }\n\n  /**\n   * Moves the container by the given distance\n   * @param {Number} distance - the moving distance\n   */\n  moveContainer(distance){\n    distance = distance | 0;\n    this.container.style.transform = 'translate3d(' + distance + 'px, 0, 0)';\n    this.container.style.webkitTransform = 'translate3d(' + distance + 'px, 0, 0)';\n  }\n\n  /**\n   * Sets the visibility of the pagination buttons\n   */\n  setPaginationButtonsVisibility(){\n    if(this.index === 0){\n      addClass('hide', this.pagination.left);\n    } else {\n      removeClass('hide', this.pagination.left);\n    }\n    if(this.index === this.stepLength){\n      addClass('hide', this.pagination.right);\n    } else {\n      removeClass('hide', this.pagination.right);\n    }\n  }\n\n  /**\n   * Only loads the images of the carousel items that are currently visible\n   */\n  loadImages(){\n    let start = this.index;\n    let itemsVisible = Math.ceil(this.element.offsetWidth / this.itemWidth);\n    let end = this.speed === Carousel.Speed.SLOW ? this.index + itemsVisible : (this.index + 1) * itemsVisible;\n    end = end > this.itemsLength ? this.itemsLength : end;\n    for(let i = start; i < end; i++ ){\n      let images = this.container.children[i].querySelectorAll('img');\n      [].forEach.call(images, image => {\n        let src = image.getAttribute('data-src');\n        if(src !== null){\n          image.setAttribute('src',src);\n          image.removeAttribute('data-src');\n        }\n      });\n    }\n  }\n}\n\n\n\n/**\n * Direction Enum string values.\n * @enum {string}\n * @readonly\n */\nCarousel.Direction = {\n  LEFT: 'left',\n  RIGHT: 'right'\n};\n\n\n/**\n * Speed Enum string values.\n * @enum {string}\n * @readonly\n */\nCarousel.Speed = {\n  SLOW: 'slow',\n  FAST: 'fast'\n};\n\n\n/**\n * @typedef Coordinate\n * @type Object\n * @property {number} [x = 0] - The X Coordinate\n * @property {number} [y = 0] - The Y Coordinate\n */\nCarousel.Coordinate = function(x = 0, y = 0){\n  return {\n    x: x,\n    y: y\n  }\n};\n\n/**\n * gets the current client height.\n * @returns {number}\n */\nfunction getWindowWidth() {\n  return window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n}\n\n/**\n * Handler for resizing\n */\nfunction resizeHandler() {\n  let currentWindowWidth = getWindowWidth();\n  if(this.windowWidth !== currentWindowWidth){\n    this.windowWidth = currentWindowWidth;\n    this.carousel.redraw();\n  }\n}\n\n/**\n * Gets called after the element is created\n */\nfunction elementCreatedHandler() {\n  this.carousel = new Carousel(this);\n}\n\n/**\n * Gets called when the element is attached to the dom\n */\nfunction elementAttachedHandler() {\n  this.carousel.init();\n  this.windowWidth = getWindowWidth();\n  window.addEventListener('resize', () =>{\n    clearTimeout(resizeHandler);\n    setTimeout(resizeHandler.bind(this),300);\n  });\n}\n\n/**\n * Registering the carousel component\n */\ntry {\n  document.registerElement('as24-carousel', {\n    prototype: Object.assign(\n      Object.create( HTMLElement.prototype, {\n        createdCallback: { value: elementCreatedHandler },\n        attachedCallback: { value: elementAttachedHandler }\n      }), {\n        redraw: function () {\n          this.carousel.redraw();\n        }\n      }\n    )\n  });\n} catch (e) {\n  if (window && window.console) {\n    window.console.warn('Failed to register CustomElement \"as24-carousel\".', e);\n  }\n}\n"]}