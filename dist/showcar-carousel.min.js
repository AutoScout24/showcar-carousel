!function(){function t(t,e){if(!e.getAttribute)return e;var i=[],n=e.getAttribute("class");return n?(i=n.split(" "),i.indexOf(t)===-1&&(n=i.concat(t).join(" "))):n=t,e.setAttribute("class",n),e}function e(t,e){if(!e.getAttribute)return e;var i=[],n=e.getAttribute("class");return n&&(i=n.split(" "),i.indexOf(t)!==-1&&i.splice(i.indexOf(t),1),e.setAttribute("class",i.join(" "))),e}function i(t,e){if(!e.getAttribute)return!1;var i=[],n=e.getAttribute("class");return n&&(i=n.split(" ")),i.indexOf(t)>-1}!function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}return"function"!=typeof window.CustomEvent&&(t.prototype=window.Event.prototype,void(window.CustomEvent=t))}(),function(){"function"!=typeof Object.assign&&(Object.assign=function(t){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var i=arguments[e];if(null!=i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t})}(),function(){Array.of||(Array.of=function(){return Array.prototype.slice.call(arguments)})}();var n=function(){function t(t,e){this.x=t,this.y=e}return t}(),s=function(){function s(t,e){this.config=null,this.element=null,this.container=null,this.wrapper=null,this.stepLength=null,this.role="unspecified-role",this.resizeListener=null,this.touchStartListener=null,this.touchMoveListener=null,this.touchEndListener=null,this.imgSrcDataAttrName="data-src",this.windowWidth=0,this.orgWidth=0,this.Enums={Direction:{LEFT:"left",RIGHT:"right"},Speed:{SLOW:"slow",FAST:"fast"},Mode:{DEFAULT:"default",SLIDER:"slider"}},this.pagination={left:null,right:null,indicator:null},this.stepWidth=null,this.totalReach=null,this.index=0,this.lastIndex=0,this.refWidth=330,this.itemWidth=330,this.itemsVisible=0,this.itemsLength=1,this.speed=null,this.time=null,this.touchStart=new n(0,0),this.config=e,this.element=t,this.speed=this.Enums.Speed.SLOW,this.role=this.element.getAttribute("role")}return s.prototype.items=function(){return this.element.querySelectorAll(".as24-carousel-item")},s.prototype.attached=function(){this.windowWidth=this.getWindowWidth(),this.resizeListener=this.resizeTimeoutHandler.bind(this),this.touchStartListener=this.touchStartEventHandler.bind(this),this.touchMoveListener=this.touchMoveEventHandler.bind(this),this.touchEndListener=this.touchEndEventHandler.bind(this),window.addEventListener("resize",this.resizeListener,!0),this.element.addEventListener("touchstart",this.touchStartListener,!0),this.element.addEventListener("touchmove",this.touchMoveListener,!0),this.element.addEventListener("touchend",this.touchEndListener,!0);var t=this.element.ontouchend?"touchend":this.element.onpointerup?"pointerup":this.element.onmspointerup?"mspointerup":"click";this.element.addEventListener(t,this.itemTapped.bind(this)),this.addContainer(),this.addPagination(),this.addIndicator(),this.redraw("data-src")},s.prototype.itemTapped=function(){this.triggerEvent("as24-carousel.tap",{id:this.element.id,role:this.role,index:this.index},!0)},s.prototype.detached=function(){window.removeEventListener("resize",this.resizeListener,!0),this.element.removeEventListener("touchstart",this.touchStartListener,!0),this.element.removeEventListener("touchmove",this.touchMoveListener,!0),this.element.removeEventListener("touchend",this.touchEndListener,!0),this.removeContainer(),this.removePagination(),this.removeIndicator()},s.prototype.redraw=function(t){void 0===t&&(t=""),this.imgSrcDataAttrName=t,this.resizeItems(),this.calculateEnvironment(),this.config.mode===this.Enums.Mode.DEFAULT?(this.index=0,this.updateDefault()):this.config.mode===this.Enums.Mode.SLIDER&&this.updateSlider({transition:!1}),this.updateIndicator()},s.prototype.resizeItems=function(){var i=this;if(this.config.mode===this.Enums.Mode.SLIDER&&this.config.preview&&this.getElementWidth()>this.config.previewBreakpoint?t("dynamic-ratio",this.element):e("dynamic-ratio",this.element),this.orgWidth=this.items()[0].getBoundingClientRect().width+this.config.gap,this.orgWidth===this.refWidth&&this.getElementWidth()<this.refWidth?(this.itemWidth=this.getElementWidth()-this.config.gap,[].forEach.call(this.items(),function(t){return t.style.width=i.itemWidth-i.config.gap+"px"})):0===this.orgWidth?this.itemWidth=640+this.config.gap:this.itemWidth=this.items()[0].getBoundingClientRect().width+this.config.gap,this.config.mode===this.Enums.Mode.SLIDER){var n=40,s=null;if(this.getElementWidth()>this.config.previewBreakpoint&&this.config.preview){var o=(this.getElementWidth()-this.itemWidth)/2;n=o>40?Math.ceil(o):40,s=n+"px"}var r=this.element.querySelectorAll("[data-direction]");[].forEach.call(r,function(t){t.style.width=n+"px"}),this.config.indicator&&(this.pagination.indicator.style.left=s)}},s.prototype.touchStartEventHandler=function(t){this.resetTouch(),i("as24-pagination-button",t.target)||(this.touchStart=this.getTouchCoords(t))},s.prototype.touchMoveEventHandler=function(t){if(this.isSwiping()){var e=this.getTouchCoords(t),i=Math.abs(e.x-this.touchStart.x),n=Math.abs(e.y-this.touchStart.y);i<n?this.resetTouch():t.preventDefault()}},s.prototype.touchEndEventHandler=function(t){if(this.isSwiping())for(var e=this.getTouchCoords(t.changedTouches[0]),i=this.touchStart.x-e.x,n=Math.abs(i),s=Math.ceil(n/this.itemWidth),o=0;o<s;o++)i>0?this.paginate(this.Enums.Direction.RIGHT):i<0&&this.paginate(this.Enums.Direction.LEFT)},s.prototype.getTouchCoords=function(t){var e=t.touches&&t.touches[0];return new n(t.clientX||e&&e.clientX,t.clientY||e&&e.clientY)},s.prototype.resetTouch=function(){this.touchStart={}},s.prototype.isSwiping=function(){return Object.keys(this.touchStart).length>0},s.prototype.addContainer=function(){var e=this;return i("as24-carousel-wrapper",this.element.firstChild)?(this.wrapper=this.element.querySelector(".as24-carousel-wrapper"),void(this.container=this.element.querySelector(".as24-carousel-container"))):(this.wrapper=document.createElement("div"),t("as24-carousel-wrapper",this.wrapper),this.container=document.createElement("div"),t("as24-carousel-container",this.container),[].forEach.call(this.element.children,function(t){var i=t.cloneNode(!0);e.container.appendChild(i)}),this.wrapper.appendChild(this.container),this.element.innerHTML="",void this.element.appendChild(this.wrapper))},s.prototype.removeContainer=function(){var t=this;[].forEach.call(this.container.children,function(e){t.container.removeChild(e)}),this.wrapper.removeChild(this.container),this.element.removeChild(this.wrapper)},s.prototype.addPagination=function(){this.removePagination(),this.createPaginationButton(this.Enums.Direction.LEFT),this.createPaginationButton(this.Enums.Direction.RIGHT),e("hide",this.pagination.right),this.config.mode===this.Enums.Mode.SLIDER&&e("hide",this.pagination.left)},s.prototype.removePagination=function(){var t=this.element.querySelectorAll("[data-direction]");[].forEach.call(t,function(t){t.parentNode.removeChild(t)})},s.prototype.addIndicator=function(){this.removeIndicator(),this.config.indicator&&(this.pagination.indicator=document.createElement("div"),t("as24-pagination-indicator",this.pagination.indicator),this.element.appendChild(this.pagination.indicator),this.updateIndicator())},s.prototype.removeIndicator=function(){var t=this.element.querySelector(".as24-pagination-indicator");null!==t&&this.element.removeChild(t)},s.prototype.createPaginationButton=function(e){var i=this,n=this.pagination[e]=document.createElement("a");t("as24-pagination-button",n),t("hide",n),n.href="#",n.setAttribute("data-direction",e),n.addEventListener("mouseup",function(t){t.stopPropagation(),t.preventDefault(),i.paginate(e)}),n.addEventListener("click",function(t){return t.preventDefault()}),this.element.appendChild(n)},s.prototype.goTo=function(t){this.lastIndex=this.index,t<0&&(t=0),this.index=t,this.update({transition:!1,direction:t>this.lastIndex?this.Enums.Direction.RIGHT:this.Enums.Direction.LEFT})},s.prototype.paginate=function(t){this.lastIndex=this.index,this.index=this.getIndexOf(this.index,t),this.update({direction:t})},s.prototype.calculateEnvironment=function(){this.itemsLength=this.container.children.length,this.itemsVisible=Math.floor(this.getElementWidth()/this.itemWidth),this.totalReach=this.container.offsetWidth-this.getElementWidth(),this.stepLength=this.speed===this.Enums.Speed.SLOW?this.itemsLength-this.itemsVisible:Math.ceil(this.itemsLength/this.itemsVisible),this.config.mode===this.Enums.Mode.SLIDER&&(this.stepLength=this.container.children.length-1),this.stepWidth=this.speed===this.Enums.Speed.SLOW?this.itemWidth:Math.floor(this.getElementWidth()/this.itemWidth)*this.itemWidth},s.prototype.getIndexOf=function(t,e){var i=t;return e===this.Enums.Direction.LEFT?i>0?i-1:this.config.mode===this.Enums.Mode.SLIDER?this.stepLength:0:e===this.Enums.Direction.RIGHT?i<this.stepLength?i+1:this.config.mode===this.Enums.Mode.SLIDER?0:this.stepLength:void 0},s.prototype.update=function(t){this.triggerEvent("as24-carousel.slide",{id:this.element.id,role:this.role,direction:t.direction,index:this.index},!0),this.updateIndicator(),this.config.mode===this.Enums.Mode.DEFAULT?this.updateDefault():this.config.mode===this.Enums.Mode.SLIDER&&this.lastIndex!==this.index&&this.updateSlider(t)},s.prototype.updateDefault=function(){var t=this.index*this.stepWidth;t=t>this.totalReach?this.totalReach:t,t=~t+1,t=this.stepLength>0?t:0;var e=[],i=this.index,n=Math.ceil(this.getElementWidth()/this.itemWidth),s=this.speed===this.Enums.Speed.SLOW?this.index+n:(this.index+1)*n;s=s>this.itemsLength?this.itemsLength:s;for(var o=i;o<s;o++)e.push(o);this.loadImages(e),this.setPaginationButtonsVisibility(),this.move(t,this.container)},s.prototype.updateSlider=function(e){var i=this,n=e.direction,s=e.transition,o=void 0===s||s,r=this.getElementWidth()>this.config.previewBreakpoint&&this.config.preview,h=n===this.Enums.Direction.RIGHT?this.getElementWidth():~this.getElementWidth()+1,a=this.endTime();this.startTime();var d=a>300?300:0;[].forEach.call(this.items(),function(e,n){t("no-transition",e),r===!1&&n!==i.lastIndex&&i.move(h,e),e.style.zIndex=0,e.style.transitionDuration=d+"ms"});var c={previewState:r,previewSize:r?2:1,offset:r?(this.getElementWidth()-this.itemWidth)/2:0,initialPosition:h,direction:n,transition:o};o?setTimeout(function(){this._positionAllItems(c)}.bind(this),10):this._positionAllItems(c)},s.prototype._positionAllItems=function(i){var n=this,s=i.direction,o=i.transition,r=i.offset,h=i.initialPosition,a=i.previewState,d=i.previewSize,c=this.items()[this.index];o&&e("no-transition",c),this.move(r,c);var l,u,p={current:this.index,direction:s,previewSize:d,transition:o,offset:r,side:null},m=this.items()[this.lastIndex];(s===this.Enums.Direction.LEFT||a)&&(a?(p.side=this.Enums.Direction.LEFT,l=this.positionItems(p)):(o&&e("no-transition",m),this.move(this.getElementWidth(),m))),(s===this.Enums.Direction.RIGHT||a)&&(a?(p.side=this.Enums.Direction.RIGHT,u=this.positionItems(p)):(o&&e("no-transition",m),this.move(~this.getElementWidth()+1,m)));var f=a?[].concat(l,[this.index],u):[this.index];a&&[].forEach.call(this.items(),function(e,i){f.indexOf(i)===-1&&(e.style.zIndex=-100,t("no-transition",e),n.move(h,e))}),this.loadImages(f)},s.prototype.positionItems=function(t){for(var i=[],n=t.current,s=t.side,o=t.direction,r=t.previewSize,h=t.transition,a=t.offset,d=this.Enums.Direction.LEFT,c=this.Enums.Direction.RIGHT,l=parseInt(n),u=s===d?c:d,p=1;p<=r;p++){l=this.getIndexOf(l,s),i.push(l),(p<r||p===r&&o===u)&&h&&e("no-transition",this.items()[l]);var m=this.itemWidth*p;m=s===c?a+m:a-m,this.move(m,this.items()[l])}return i},s.prototype.updateIndicator=function(){null!==this.pagination.indicator&&(this.pagination.indicator.innerHTML=this.index+1+"/"+this.itemsLength)},s.prototype.move=function(t,e){e.style.transform="translate3d("+t+"px, 0, 0)",e.style.webkitTransform="translate3d("+t+"px, 0, 0)"},s.prototype.setPaginationButtonsVisibility=function(){0===this.index?t("hide",this.pagination.left):e("hide",this.pagination.left),this.index===this.stepLength||this.stepLength<=0?t("hide",this.pagination.right):e("hide",this.pagination.right)},s.prototype.loadImages=function(t){var e=this;void 0===t&&(t=[]),[].forEach.call(t,function(t){var i=e.container.children[t].querySelectorAll("img");[].forEach.call(i,function(t){var i=t.getAttribute(e.imgSrcDataAttrName);null!==i&&t.setAttribute("src",i)})})},s.prototype.triggerEvent=function(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=this.element);var s=new CustomEvent(t,{detail:e,bubbles:i});n.dispatchEvent(s)},s.prototype.resizeHandler=function(){var t=this.getWindowWidth();this.windowWidth!==t&&(this.windowWidth=t,this.redraw(this.imgSrcDataAttrName))},s.prototype.resizeTimeoutHandler=function(){this.resizeHandler()},s.prototype.getWindowWidth=function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},s.prototype.getElementWidth=function(){var t=getComputedStyle(this.element),e=this.element.offsetWidth;return e-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)},s.prototype.startTime=function(){this.time=new Date},s.prototype.endTime=function(){if(null!==this.time){var t=new Date;return t.getTime()-this.time}return 300},s}();!function(){var t=[{name:"gap",value:20,type:"Number"},{name:"mode",value:"default",type:"String"},{name:"preview",value:!1,type:"Boolean"},{name:"previewBreakpoint",value:640,type:"Number"},{name:"indicator",value:!1,type:"Boolean"}],e=function(){var e=this,i={};[].forEach.call(t,function(t){i[t.name]=r(e.getAttribute(t.name),t.value,t.type)}),this.carousel=new s(this,i)},i=function(){this.carousel.attached()},n=function(){this.carousel.detached(),delete this.carousel},o=function(e){var i=this;[].forEach.call(t,function(t){t.name===e&&(i.carousel.config[t.name]=r(i.getAttribute(t.name),t.value,t.type))})},r=function(t,e,i){return void 0===i&&(i="String"),"undefined"!==t&&null!==t?("Number"===i&&(t=parseInt(t)),"Boolean"===i&&(t="true"==t),t):e};try{document.registerElement("as24-carousel",{prototype:Object.assign(Object.create(HTMLElement.prototype,{createdCallback:{value:e},attachedCallback:{value:i},detachedCallback:{value:n},attributeChangedCallback:{value:o}}),{redraw:function(t){this.carousel.redraw(t)},goTo:function(t){this.carousel.goTo(t)},getIndex:function(){return this.carousel.index},getStepLength:function(){return this.carousel.stepLength}})})}catch(t){window&&window.console&&window.console.warn('Failed to register CustomElement "as24-carousel".',t)}}()}();
//# sourceMappingURL=dist/showcar-carousel.min.js.map