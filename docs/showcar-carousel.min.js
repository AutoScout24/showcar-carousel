!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(this,function(){"use strict";function t(){this.carousel=new j(this),this.carousel.attached()}function e(){this.carousel.detached(),delete this.carousel}var n=function(t,e){return e.classList.add(t),e},i=function(t,e){return e.classList.remove(t),e},r=function(t,e,r){return r?(n(t,e),!0):(i(t,e),!1)},o=function(t,e){return Array.prototype.forEach.call(e,t)},s=function(t,e){for(var n in e)t[n]=e[n]},a=function(t){return Array.from(t).map(function(t,e){return e})},u=function(t,e,n){var i=t*e;return i>n?n:i},c=function(t,e,n,i,r){var o=i+e;return"infinite"===t?o<0?n-r:o>n-r?0:o:"finite"===t?(o=i+e,o<0?0:o>n-r?n-r:o):void 0},h=function(t,e){var n=e.element,i=e.container,r=(e.itemsOrder,e.mode),o=(e.offset,e.index),s=(e.pagination,v(n,i).itemsVisible);return c(r,t,i.children.length,o,s)},l=function(t){var e=null!==t?getComputedStyle(t):null;return null!==e&&"none"!==e.display},d=function(t){return t.map(l).reduce(function(t,e){return t&&e},!0)},f=function(t,e){var n=getComputedStyle(t),i=n.width,r=n.marginLeft,o=n.marginRight,s=n.paddingLeft,a=n.paddingRight,u=n.boxSizing,c=e?parseFloat(r)+parseFloat(o):0,h="border-box"===u?0:parseFloat(s)+parseFloat(a),l=parseFloat(i)+h+c;return l},v=function(t,e){var n=f(t,!1),i="infinite"===t.getAttribute("loop")?t.getBoundingClientRect().width:f(e.children.item(0),!0),r=Math.floor(Array.from(e.children).reduce(function(t,e){return t+=f(e,!0)},0)),o=Math.floor(r-n),s=Math.floor((0|n)/(0|i));return{maxOffset:o,stepWidth:i,itemsVisible:s,rootElemWidth:n,totalWidth:r}},m=function(t,e,n){return n.map(function(n,i){return t(e[i],n)})},p=function(t,e){var n=null;return function(){n||(t(),n=setTimeout(function(){clearTimeout(n),n=null},e))}},y=function(t){var e=t.touches&&t.touches[0];return new b(t.clientX||e&&e.clientX,t.clientY||e&&e.clientY)},b=function(){function t(t,e){this.x=t,this.y=e}return t}(),x=function(t,e,n,i){return!(!t||!e)&&(r("as24-carousel__button--hidden",t,!n),r("as24-carousel__button--hidden",e,!i),!0)},g=function(t,e,n){return t.dispatchEvent(new CustomEvent("as24-carousel.slide",{detail:{id:t.id,role:t.getAttribute("role"),direction:e,index:n},bubbles:!0}))},S=function(t,e,n){return!!t&&(t.innerHTML=e+"/"+n,!0)},w=function(t,e){return t.style.transform="translate3d("+-1*e+"px, 0, 0)",t.style.webkitTransform="translate3d("+-1*e+"px, 0, 0)",!0},E=function(t,e){return t.style.WebkitOrder=e.toString(),t.style.order=e.toString(),e},L=function(t,e){return m(E,t,e)},_=function(t,e,r){return e.forEach(function(t){return i("as24-carousel__item--invisible",t)}),r.forEach(function(i,r){i>t-1&&n("as24-carousel__item--invisible",e[r])}),e},A=function(t,e,n){var r=e.element,o=e.container,s=e.offset,a=e.index,c=e.pagination,l=v(r,o),d=l.rootElemWidth,f=l.stepWidth,m=l.maxOffset,p=(l.itemsVisible,l.totalWidth);i("as24-carousel__container--static",o),a=h(t,e);var y=d>p?0:u(a,f,m);return x(c.left,c.right,y>0,y<m),Math.abs(s-y)>0&&n&&g(r,t,a),S(c.indicator,a+1,o.children.length),w(o,y),{touchStart:null,index:a,offset:y}},M=function(t,e){var i=e.offset,r=e.index,o=e.container;return n("as24-carousel__container--static",o),{touchStart:t,index:r,offset:i}},O=function(t,e){var n=e.offset,i=e.touchStart,r=e.index,o=e.container,s=Math.abs(t.x-i.x),a=Math.abs(t.y-i.y);if(s<a)return{index:r,offset:n,touchStart:i};var u=n+-1*(t.x-i.x);return w(o,u),{index:r,offset:n,touchStart:i}},T=function(t,e){var n=e.index,i=e.offset,r=e.touchStart,o=(e.container,r.x-t.x>0?1:-1),s=Math.abs(t.x-r.x),a=Math.abs(t.y-r.y);return s<a||s<25?{index:n,offset:i,touchStart:r}:A(o,e,!0)},W=function(t,e){var n=e.slice(e.length-t,e.length),i=e.slice(0,e.length-t);return n.concat(i)},C=function(t,e){var r=t.element,o=t.container,s=t.itemsOrder,u=(t.offset,t.index,v(r,o).stepWidth,Array.from(o.children));return e?i("as24-carousel__container--static",o):(n("as24-carousel__container--static",o),_(2,u,L(u,s))),w(o,0),t.busy=!1,t.itemsOrder=a(o.children),t},H=function(t,e,r){var o=e.element,s=e.container,u=e.touchStart,c=e.offset,l=e.index,d=e.pagination,f=e.busy,m=v(o,s),p=m.stepWidth,y=(m.itemsVisible,Array.from(s.children));if(!f){l=0!==t?h(t,e):l,c=t===-1?0===c?t*p:t*c:t*p;var b=a(s.children),x=W(l,b);return t<0?(n("as24-carousel__container--static",s),_(2,y,L(y,x)),w(s,-1*c),C(e,!0)):t>0?(i("as24-carousel__container--static",s),w(s,c)):_(2,y,L(y,x)),r&&g(o,t,l),S(d.indicator,l+1,s.children.length),{index:l,touchStart:u,offset:0,itemsOrder:x,busy:!0,isSwiping:!1,swipeDir:void 0}}},k=function(t,e){var i=e.offset,r=e.index,o=e.container,s=e.busy;if(!s)return n("as24-carousel__container--static",o),{touchStart:t,index:r,offset:i,busy:s,isSwiping:void 0,swipeDir:void 0}},q=function(t,e){var n=e.touchStart,i=e.index,r=e.container,o=e.element,s=e.busy,u=e.isSwiping,c=e.swipeDir;if(!s){var l,d,f=0,m=Math.abs(t.x-n.x),p=Math.abs(t.y-n.y),y=v(o,r),b=y.stepWidth;y.itemsVisible;return void 0===c&&(c=n.x-t.x>0?1:-1),u&&(c===-1?(l=W(h(c,e),a(r.children)),d=Array.from(r.children),_(2,d,L(d,l)),f=b+-1*(t.x-n.x)):f=-1*(t.x-n.x),w(r,f)),{index:i,touchStart:n,offset:f,itemsOrder:l,busy:s,swipeDir:c,isSwiping:void 0===u?m/p>.6:u}}},z=function(t,e){var n=(e.index,e.offset,e.touchStart),r=e.container,o=(e.busy,e.isSwiping);if(o){i("as24-carousel__container--static",r);var s=n.x-t.x>0?1:-1;return H(s,e,!0)}},D=function(t,e,n){void 0===n&&(n=!0);var i=e.mode;switch(i){case"infinite":return H(t,e,n);case"finite":return A(t,e,n)}},F=function(t,e){var n=e.mode;switch(n){case"infinite":return k(t,e);case"finite":return M(t,e)}},I=function(t,e){var n=e.mode;switch(n){case"infinite":return q(t,e);case"finite":return O(t,e)}},V=function(t,e){var n=e.mode;switch(n){case"infinite":return z(t,e);case"finite":return T(t,e)}},j=function(){function t(t){var e=this;this.isSwiping=void 0,this.busy=!1,this.index=0,this.offset=0,this.mode="finite",this.pagination={left:null,right:null,indicator:null},this.touchStart=new b(0,0),this.element=t,this.mode=this.element.getAttribute("loop")||"finite",this.container=this.element.querySelector('[role="container"]'),this.container.addEventListener("transitionend",function(t){return e.busy=!1}),"infinite"===this.mode&&this.container.addEventListener("transitionend",function(t){s(e,C(e,!1))})}return t.prototype.attached=function(){var t=this;this.resizeListener=p(D.bind(null,0,this.mode,this),100),this.touchStartListener=this.touchStartEventHandler.bind(this),this.touchMoveListener=this.touchMoveEventHandler.bind(this),this.touchEndListener=this.touchEndEventHandler.bind(this),window.addEventListener("resize",this.resizeListener,!0),this.element.addEventListener("touchstart",this.touchStartListener,!0),this.element.addEventListener("touchmove",this.touchMoveListener,!0),this.element.addEventListener("touchend",this.touchEndListener,!0),o(function(e){var n=e.getAttribute("data-direction");t.pagination[e.getAttribute("data-direction")]=e;var i="touchend"in window?"touchend":"click";e.addEventListener(i,function(e){e.preventDefault(),e.stopPropagation(),s(t,D("left"===n?-1:1,t))})},this.element.querySelectorAll('[role="nav-button"]')),this.pagination.indicator=this.element.querySelector('[role="indicator"]'),this.index=0,s(this,D(0,this,!1)),this.busy=!1},t.prototype.detached=function(){window.removeEventListener("resize",this.resizeListener,!0),this.element.removeEventListener("touchstart",this.touchStartListener,!0),this.element.removeEventListener("touchmove",this.touchMoveListener,!0),this.element.removeEventListener("touchend",this.touchEndListener,!0)},t.prototype.touchStartEventHandler=function(t){var e=Array.from(this.element.querySelectorAll('[role="nav-button"]'));d(e)&&s(this,F(y(t),this))},t.prototype.touchMoveEventHandler=function(t){var e=Array.from(this.element.querySelectorAll('[role="nav-button"]'));d(e)&&(s(this,I(y(t),this)),this.isSwiping&&t.preventDefault())},t.prototype.touchEndEventHandler=function(t){var e=Array.from(this.element.querySelectorAll('[role="nav-button"]')),n=y(t.changedTouches[0]);!d(e)||this.touchStart&&this.touchStart.x===n.x||s(this,V(n,this))},t.prototype.goTo=function(t,e){this.index=--t,this.index=h(0,this),this.touchStart=new b(0,0),s(this,D(0,this,e.notify)),this.busy=!1},t.prototype.getIndex=function(){return this.index},t.prototype.redraw=function(t){void 0===t&&(t=!0),s(this,D(0,this,t)),this.busy=!1},t.prototype.removeItem=function(t){this.container.children[t].remove(),this.busy=!1,this.goTo(1,{notify:!1})},t}();try{document.registerElement("as24-carousel",{prototype:Object.assign(Object.create(HTMLElement.prototype,{attachedCallback:{value:t},detachedCallback:{value:e},attributeChangedCallback:{value:function(){}}}),{goTo:function(t,e){this.carousel.goTo(t,e||{notify:!0})},getIndex:function(){return this.carousel.index},redraw:function(t){this.carousel.redraw(t)},removeItem:function(t){this.carousel.removeItem(t)}})})}catch(t){window&&window.console&&window.console.warn('Failed to register CustomElement "as24-carousel".',t)}});
//# sourceMappingURL=showcar-carousel.min.js.map